<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Chat</title>
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    </head>
    <body>
        <a id="login">Log in</a>
        <script>
            $.ajax({
                url: "/api/user"
            }).then(function(user) {
                console.log('logged in as ' + user.name);
            }, function() {
                $.ajax({
                    url: "/api/oauth/uri"
                }).then(function(result) {
                    document.getElementById("login").href = result.uri;
                });
                console.log('not logged in');
            });
        </script>
    </body>
</html>